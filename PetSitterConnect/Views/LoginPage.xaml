<?xml version="1.0" encoding="utf-8" ?>
<ContentPage x:Class="PetSitterConnect.Views.LoginPage"
             xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:viewmodels="clr-namespace:PetSitterConnect.ViewModels"
             x:DataType="viewmodels:LoginViewModel"
             Title="{Binding Title}"
             Shell.NavBarIsVisible="False"
             BackgroundColor="{AppThemeBinding Light=#F8F9FA, Dark=#1C1C1E}">

    <ScrollView>
        <StackLayout Spacing="0" Padding="0">
            
            <!-- Header Section -->
            <StackLayout BackgroundColor="{AppThemeBinding Light=#007AFF, Dark=#0A84FF}" 
                         Padding="30,60,30,40"
                         Spacing="20">
                
                <!-- Logo -->
                <Grid WidthRequest="100" 
                      HeightRequest="100" 
                      HorizontalOptions="Center">
                    <!-- Background Circle -->
                    <Border BackgroundColor="White"
                            WidthRequest="100"
                            HeightRequest="100"
                            StrokeShape="RoundRectangle 50">
                        <!-- Inner Circle -->
                        <Border BackgroundColor="{AppThemeBinding Light=#007AFF, Dark=#0A84FF}"
                                WidthRequest="80"
                                HeightRequest="80"
                                StrokeShape="RoundRectangle 40"
                                HorizontalOptions="Center"
                                VerticalOptions="Center">
                            <!-- Logo Text -->
                            <Label Text="PC"
                                   FontSize="28"
                                   FontAttributes="Bold"
                                   TextColor="White"
                                   HorizontalOptions="Center"
                                   VerticalOptions="Center" />
                        </Border>
                    </Border>
                </Grid>
                
                <!-- App Title -->
                <Label Text="PetSitter Connect"
                       FontSize="32"
                       FontAttributes="Bold"
                       TextColor="White"
                       HorizontalOptions="Center" />
                
                <!-- Subtitle -->
                <Label Text="Welcome back! Connect with loving pet care."
                       FontSize="16"
                       TextColor="White"
                       Opacity="0.9"
                       HorizontalOptions="Center"
                       HorizontalTextAlignment="Center" />
                       
            </StackLayout>

            <!-- Login Form Section -->
            <StackLayout BackgroundColor="{AppThemeBinding Light=White, Dark=#2C2C2E}"
                         Padding="30,40"
                         Spacing="25">

                <!-- Email Input -->
                <StackLayout Spacing="8">
                    <Label Text="Email"
                           FontSize="16"
                           FontAttributes="Bold"
                           TextColor="{AppThemeBinding Light=#1C1C1E, Dark=#F2F2F7}" />
                    <Border BackgroundColor="{AppThemeBinding Light=#F2F2F7, Dark=#3A3A3C}"
                            Stroke="{AppThemeBinding Light=#E5E5EA, Dark=#48484A}"
                            StrokeThickness="1"
                            StrokeShape="RoundRectangle 12"
                            Padding="16,14">
                        <Entry Text="{Binding Email}"
                               Placeholder="Enter your email"
                               PlaceholderColor="{AppThemeBinding Light=#8E8E93, Dark=#8E8E93}"
                               TextColor="{AppThemeBinding Light=#1C1C1E, Dark=#F2F2F7}"
                               Keyboard="Email"
                               ReturnType="Next"
                               BackgroundColor="Transparent"
                               FontSize="16" />
                    </Border>
                </StackLayout>

                <!-- Password Input -->
                <StackLayout Spacing="8">
                    <Label Text="Password"
                           FontSize="16"
                           FontAttributes="Bold"
                           TextColor="{AppThemeBinding Light=#1C1C1E, Dark=#F2F2F7}" />
                    <Border BackgroundColor="{AppThemeBinding Light=#F2F2F7, Dark=#3A3A3C}"
                            Stroke="{AppThemeBinding Light=#E5E5EA, Dark=#48484A}"
                            StrokeThickness="1"
                            StrokeShape="RoundRectangle 12"
                            Padding="16,14">
                        <Entry Text="{Binding Password}"
                               Placeholder="Enter your password"
                               PlaceholderColor="{AppThemeBinding Light=#8E8E93, Dark=#8E8E93}"
                               TextColor="{AppThemeBinding Light=#1C1C1E, Dark=#F2F2F7}"
                               IsPassword="True"
                               ReturnType="Done"
                               BackgroundColor="Transparent"
                               FontSize="16" />
                    </Border>
                </StackLayout>

                <!-- Remember Me -->
                <StackLayout Orientation="Horizontal" Spacing="12">
                    <CheckBox IsChecked="{Binding RememberMe}"
                              Color="{AppThemeBinding Light=#007AFF, Dark=#0A84FF}" />
                    <Label Text="Remember me"
                           VerticalOptions="Center"
                           FontSize="16"
                           TextColor="{AppThemeBinding Light=#6C6C70, Dark=#AEAEB2}" />
                </StackLayout>

                <!-- Error Message -->
                <StackLayout BackgroundColor="#FFEBEE"
                             Padding="16,12"
                             IsVisible="{Binding ErrorMessage, Converter={StaticResource StringToBoolConverter}}">
                    <StackLayout.Triggers>
                        <DataTrigger TargetType="StackLayout" Binding="{Binding ErrorMessage, Converter={StaticResource StringToBoolConverter}}" Value="True">
                            <Setter Property="BackgroundColor" Value="#FFEBEE" />
                        </DataTrigger>
                    </StackLayout.Triggers>
                    <Label Text="{Binding ErrorMessage}"
                           TextColor="#D32F2F"
                           FontSize="14" />
                </StackLayout>

                <!-- Sign In Button -->
                <Button Text="Sign In"
                        Command="{Binding LoginCommand}"
                        BackgroundColor="{AppThemeBinding Light=#007AFF, Dark=#0A84FF}"
                        TextColor="White"
                        FontSize="18"
                        FontAttributes="Bold"
                        HeightRequest="56"
                        CornerRadius="12"
                        IsEnabled="{Binding IsBusy, Converter={StaticResource InvertedBoolConverter}}" />

                <!-- Loading Indicator -->
                <ActivityIndicator IsVisible="{Binding IsBusy}"
                                   IsRunning="{Binding IsBusy}"
                                   Color="{AppThemeBinding Light=#007AFF, Dark=#0A84FF}" />

                <!-- Forgot Password -->
                <Button Text="Forgot Password?"
                        Command="{Binding ForgotPasswordCommand}"
                        BackgroundColor="Transparent"
                        TextColor="{AppThemeBinding Light=#007AFF, Dark=#0A84FF}"
                        FontSize="16"
                        FontAttributes="Bold"
                        HorizontalOptions="Center" />

            </StackLayout>

            <!-- Footer Section -->
            <StackLayout BackgroundColor="{AppThemeBinding Light=#F8F9FA, Dark=#1C1C1E}"
                         Padding="30,30,30,50"
                         Spacing="20">
                
                <!-- Divider -->
                <BoxView HeightRequest="1"
                         BackgroundColor="{AppThemeBinding Light=#E5E5EA, Dark=#48484A}"
                         HorizontalOptions="FillAndExpand" />

                <!-- Sign Up Link -->
                <StackLayout Orientation="Horizontal" 
                             HorizontalOptions="Center" 
                             Spacing="8">
                    <Label Text="New to pet care?"
                           FontSize="16"
                           TextColor="{AppThemeBinding Light=#6C6C70, Dark=#AEAEB2}" />
                    <Button Text="Join Us"
                            Command="{Binding NavigateToRegisterCommand}"
                            BackgroundColor="Transparent"
                            TextColor="{AppThemeBinding Light=#007AFF, Dark=#0A84FF}"
                            FontSize="16"
                            FontAttributes="Bold"
                            Padding="0" />
                </StackLayout>
                
            </StackLayout>

        </StackLayout>
    </ScrollView>

</ContentPage>
